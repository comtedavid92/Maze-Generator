<!DOCTYPE html>
<html>
<body>
    <canvas id="canvas" height="750" style="border:1px solid black;"></canvas>
    
    <br>
    
    <label for="rotate-button">
        <input type="checkbox" id="rotate-button"> Rotate the maze
    </label>

    <script src="data_example.js"></script>
    <script src="data.js"></script>

    <script>
        function drawMaze(rotation) {
            var canvas = document.getElementById("canvas");
            var ctx = canvas.getContext("2d");
            
            var canvasHeight = canvas.height;
            var canvasWidth = canvasHeight * width / height;
            document.getElementById("canvas").setAttribute("width", canvasWidth);

            var tileHeight = canvasHeight / height;
            var tileWidth = canvasWidth / width;

            var tileHeightPadding = 0.25 * tileHeight;
            var tileWidthPadding = 0.25 * tileWidth;
            
            if(rotation) {
                ctx.save();
                ctx.rotate(Math.PI);
                ctx.translate(-canvasWidth, -canvasHeight);
            }

            // Draw maze
            var index = 0;
            for(var i = 0;  i < height; i++) {
                for(var j = 0; j < width; j++) {

                    if(maze[index] == 0) {
                        ctx.fillStyle = "white";
                    } else {
                        ctx.fillStyle = "black";
                    }

                    ctx.fillRect(j * tileWidth, i * tileHeight, tileWidth, tileHeight);

                    index++;
                }
            }

            // Draw path
            ctx.fillStyle = "grey";
            for(var i = 0; i < pathLocations.length; i++) {
                var row = pathLocations[i][0];
                var col = pathLocations[i][1];

                ctx.fillRect(
                    col * tileWidth + tileWidthPadding, row * tileHeight + tileHeightPadding,
                    tileWidth - 2.0 * tileWidthPadding, tileHeight - 2.0 * tileHeightPadding
                );
            }

            // Draw start
            ctx.fillStyle = "green";
            {
                var row = start[0];
                var col = start[1];
                ctx.fillRect(
                    col * tileWidth + tileWidthPadding, row * tileHeight + tileHeightPadding,
                    tileWidth - 2.0 * tileWidthPadding, tileHeight - 2.0 * tileHeightPadding
                );
            }

            // Draw end
            ctx.fillStyle = "red";
            {
                var row = end[0];
                var col = end[1];
                ctx.fillRect(
                    col * tileWidth + tileWidthPadding, row * tileHeight + tileHeightPadding,
                    tileWidth - 2.0 * tileWidthPadding, tileHeight - 2.0 * tileHeightPadding
                );
            }

            if(rotation) {
                ctx.restore();
            }
        }

        document.getElementById("rotate-button").addEventListener("change", function () {
            if (this.checked) {
                drawMaze(true);
            } else {
                drawMaze(false);
            }
        });
        
        drawMaze(false);
    </script>
</body>
</html>